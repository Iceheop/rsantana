---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Nav from '../../components/Nav.astro';
import Footer from '../../components/Footer.astro';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: project,
  }));
}

const project = Astro.props;
const { Content } = await project.render();
---
<Layout title={project.data.title} theme="dark">
      <Nav />
      <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/" class="text-decoration-none">Inicio</a></li>
          <li class="breadcrumb-item"><a href="/projects" class="text-decoration-none">Proyectos</a></li>
          <li class="breadcrumb-item active" aria-current="page">{project.data.title}</li>
        </ol>
      </nav>
      <article class="py-3">
        <img src={project.data.heroImage} alt={project.data.description} class="img-fluid rounded-2 mb-4" transition:name={`hero-${project.slug}`}>
        <header class="mb-5">
          <h1 class="fs-4 fw-bold" transition:name={`title-${project.slug}`}>{project.data.title}</h1>
          <p class="text-secondary">{project.data.description}</p>
        </header>
        <Content />
      </article>
      <Footer />
</Layout>